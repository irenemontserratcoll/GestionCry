<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Reservas Cry</title>
    <link rel="stylesheet" th:href="@{/stylesAdmin.css}">
</head>
<body>
    <div class="admin-container">

        <!-- MENSAJES -->
        <div th:if="${success}" class="success-message">
            <p th:text="${success}"></p>
        </div>
        <div th:if="${error}" class="error-message">
            <p th:text="${error}"></p>
        </div>

        <!-- LOGO Y TÍTULO -->
        <img th:src="@{/logo.jpeg}" alt="Logo" class="logo">
        <h2>Reservas Cry</h2>

        <!-- PESTAÑA -->
        <div class="tab-menu">
            <button class="tab active" onclick="showTab('reserva')">Reservar</button>
        </div>

        <!-- FORMULARIO DE RESERVA -->
        <div id="reserva" class="tab-content active">
            <div class="user-form">
                <h3>Realizar una reserva</h3>
                <form action="/reservar" method="post">
                    <input type="text" name="nombreCliente" placeholder="Nombre completo" required>
                    <input type="email" name="emailCliente" placeholder="Correo electrónico" required>
                    <input type="date" name="fechaReserva" required>
                    <input type="time" name="horaReserva" required>
                    <input type="number" name="numPersonas" placeholder="Número de personas" min="1" required>

                    <label for="tipoRecurso">Seleccionar recurso:</label>
                    <select name="tipoRecurso" id="tipoRecurso" onchange="mostrarOpciones()" required>
                        <option value="">-- Seleccione una opción --</option>
                        <option value="libro">Libro</option>
                        <option value="ordenador">Ordenador</option>
                        <option value="salaGrupal">Sala Grupal</option>
                        <option value="espacioIndividual">Espacio Individual</option>
                    </select>

                    <div id="opciones-libro" class="opcion-recurso" style="display:none;">
                        <label for="libroId">Selecciona un libro:</label>
                        <select name="libroId" id="libroId">
                            <option th:each="libro : ${libros}" th:value="${libro.id}" th:text="${libro.titulo}"></option>
                        </select>
                    </div>

                    <div id="opciones-ordenador" class="opcion-recurso" style="display:none;">
                        <label for="ordenadorId">Selecciona un ordenador:</label>
                        <select name="ordenadorId" id="ordenadorId">
                            <option th:each="ordenador : ${ordenadores}" th:value="${ordenador.id}" th:text="${ordenador.modelo}"></option>
                        </select>
                    </div>

                    <div id="opciones-salaGrupal" class="opcion-recurso" style="display:none;">
                        <label for="salaGrupalId">Selecciona una sala grupal:</label>
                        <select name="salaGrupalId" id="salaGrupalId">
                            <option th:each="sala : ${salasGrupales}" th:value="${sala.id}" th:text="'Sala ' + ${sala.numeroSala}"></option>
                        </select>
                    </div>

                    <div id="opciones-espacioIndividual" class="opcion-recurso" style="display:none;">
                        <label for="espacioIndividualId">Selecciona un espacio individual:</label>
                        <select name="espacioIndividualId" id="espacioIndividualId">
                            <option th:each="espacio : ${espaciosIndividuales}" th:value="${espacio.id}" th:text="'Asiento ' + ${espacio.numeroAsiento}"></option>
                        </select>
                    </div>

                    <button type="submit" class="btn-add">Reservar</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');

            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            event.target.classList.add('active');
        }

        function mostrarOpciones() {
            const tipo = document.getElementById("tipoRecurso").value;
            const opciones = document.querySelectorAll('.opcion-recurso');
            opciones.forEach(op => op.style.display = 'none');

            if (tipo) {
                document.getElementById('opciones-' + tipo).style.display = 'block';
            }
        }
    </script>
</body>
</html>
